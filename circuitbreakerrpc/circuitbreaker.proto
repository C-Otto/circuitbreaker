syntax = "proto3";

package circuitbreaker;

option go_package = "github.com/lightningequipment/circuitbreaker/circuitbreakerrpc";

service Service {
    rpc GetInfo (GetInfoRequest) returns (GetInfoResponse);

    rpc UpdateLimit (UpdateLimitRequest) returns (UpdateLimitResponse);

    rpc ListLimits (ListLimitsRequest) returns (ListLimitsResponse);
}

message GetInfoRequest {}

message GetInfoResponse {
    string connected_node = 1;
}

message UpdateLimitRequest {
    string node = 1;
    int64 min_interval_ms = 2;
	int64 burst_size = 3;
	int64 max_pending = 4;
}

message UpdateLimitResponse {}

message ListLimitsRequest {}

message ListLimitsResponse {
    repeated Limit limits = 1;
}

message Limit {
    string node = 1;
    int64 min_interval_ms = 2;
	int64 burst_size = 3;
	int64 max_pending = 4;
}